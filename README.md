# üìã –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –°–∏—Å—Ç–µ–º–∞ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –†–µ—Å—É—Ä—Å–æ–≤

## üéØ –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –°–∏—Å—Ç–µ–º–∞ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –†–µ—Å—É—Ä—Å–æ–≤** - —ç—Ç–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è–º–∏ –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ä–µ—Å—É—Ä—Å–æ–≤ –≤ —Ä–∞–º–∫–∞—Ö –∫–æ–º–ø–∞–Ω–∏–π. –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥–∏–±–∫—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Ä–∞–±–æ—á–∏—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤, —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –∏ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Ä–µ—Å—É—Ä—Å–æ–≤.

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏

#### 1. **Company (–ö–æ–º–ø–∞–Ω–∏—è)**
- –ë–∞–∑–æ–≤–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞
- –°–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ—Å—É—Ä—Å—ã, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏)

#### 2. **Timetable (–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ)**
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã –∏ –ø–µ—Ä–µ—Ä—ã–≤—ã
- –î–≤–∞ —Ç–∏–ø–∞: **—Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ** –∏ **–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ**

**–°—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ:**
```php
{
  "days": {
    "monday": {
      "working_hours": {"start": "09:00", "end": "18:00"},
      "breaks": [{"start": "13:00", "end": "14:00"}]
    },
    // ... –¥—Ä—É–≥–∏–µ –¥–Ω–∏
  },
  "holidays": ["01-01", "01-07"] // —Ä–æ—Å—Å–∏–π—Å–∫–∏–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏
}
```

**–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ:**
```php
{
  "dates": {
    "01-15": {
      "working_hours": {"start": "10:00", "end": "20:00"},
      "breaks": [{"start": "14:00", "end": "15:00"}]
    }
    // ... –¥—Ä—É–≥–∏–µ –¥–∞—Ç—ã
  }
}
```

#### 3. **ResourceType (–¢–∏–ø —Ä–µ—Å—É—Ä—Å–∞)**
- –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ (—Å–æ—Ç—Ä—É–¥–Ω–∏–∫, –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–Ω–∞—è, –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ)
- –°–æ–¥–µ—Ä–∂–∏—Ç –æ–±—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ —ç—Ç–æ–≥–æ —Ç–∏–ø–∞
- –ú–æ–∂–µ—Ç –∏–º–µ—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ

#### 4. **Resource (–†–µ—Å—É—Ä—Å)**
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –æ–±—ä–µ–∫—Ç –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–ø–∞—Ä–∏–∫–º–∞—Ö–µ—Ä –ò–≤–∞–Ω, –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–Ω–∞—è ‚Ññ201)
- –ù–∞—Å–ª–µ–¥—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –æ—Ç —Ç–∏–ø–∞ —Ä–µ—Å—É—Ä—Å–∞, –Ω–æ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –ò–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ (—Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ > —Ç–∏–ø–∞ —Ä–µ—Å—É—Ä—Å–∞)

#### 5. **Booking (–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)**
- –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–ø–∏—Å—å –Ω–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–ª–æ—Ç
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –∏ –≥—Ä—É–ø–ø–æ–≤—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ò–º–µ–µ—Ç —Å—Ç–∞—Ç—É—Å–Ω—ã–π workflow

#### 6. **Booker (–ë—Ä–æ–Ω–∏—Ä—É—é—â–∏–π)**
- –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å –¥–ª—è —Å–≤—è–∑–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- Polymorphic –æ—Ç–Ω–æ—à–µ–Ω–∏—è –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ (ResourceConfig)

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```php
{
  "require_confirmation": false,      // –¢—Ä–µ–±–æ–≤–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±—Ä–æ–Ω–∏
  "slot_duration_minutes": 60,       // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–ª–æ—Ç–∞ –≤ –º–∏–Ω—É—Ç–∞—Ö
  "max_participants": null,          // –ú–∞–∫—Å. —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (null - –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π)
  "slot_strategy": "fixed",          // –°—Ç—Ä–∞—Ç–µ–≥–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª–æ—Ç–æ–≤
  "min_advance_time": 60,            // –ú–∏–Ω. –≤—Ä–µ–º—è –¥–æ –±—Ä–æ–Ω–∏ (–º–∏–Ω—É—Ç—ã)
  "cancellation_time": 120,          // –í—Ä–µ–º—è –¥–ª—è –æ—Ç–º–µ–Ω—ã (–º–∏–Ω—É—Ç—ã)
  "reschedule_time": 240,            // –í—Ä–µ–º—è –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ (–º–∏–Ω—É—Ç—ã)
  "reminder_time": null              // –í—Ä–µ–º—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (–º–∏–Ω—É—Ç—ã)
}
```

### –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
1. **–†–µ—Å—É—Ä—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é**, –µ—Å–ª–∏ –æ–Ω–∞ –∑–∞–¥–∞–Ω–∞
2. **–ò–Ω–∞—á–µ –Ω–∞—Å–ª–µ–¥—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Ç–∏–ø–∞ —Ä–µ—Å—É—Ä—Å–∞**
3. **–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ**: —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ > —Ç–∏–ø–∞ —Ä–µ—Å—É—Ä—Å–∞

---

## üéØ –ê–ª–≥–æ—Ä–∏—Ç–º—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª–æ—Ç–æ–≤

### 1. **–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è (Fixed Strategy)**

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
```
1. –ü–æ–ª—É—á–∏—Ç—å —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã –∏–∑ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∞—Ç—É
2. –ù–∞—á–∞—Ç—å –æ—Ç –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è —Å —à–∞–≥–æ–º = –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–ª–æ—Ç–∞
3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–ª–æ—Ç–∞:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–ª–æ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–ª–æ—Ç –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è —Å –ø–µ—Ä–µ—Ä—ã–≤–∞–º–∏
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–ª–æ—Ç –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏
4. –í–µ—Ä–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤
```

**–ü—Ä–∏–º–µ—Ä:**
```
–†–∞–±–æ—á–∏–µ —á–∞—Å—ã: 09:00-18:00
–ü–µ—Ä–µ—Ä—ã–≤: 13:00-14:00
–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–ª–æ—Ç–∞: 60 –º–∏–Ω—É—Ç

–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ—Ç—ã:
09:00-10:00
10:00-11:00
11:00-12:00
12:00-13:00 ‚ùå (–ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è —Å –ø–µ—Ä–µ—Ä—ã–≤–æ–º)
14:00-15:00
15:00-16:00
16:00-17:00
17:00-18:00
```

### 2. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è (Dynamic Strategy)**

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
```
1. –ü–æ–ª—É—á–∏—Ç—å —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã –∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
2. –°–æ–∑–¥–∞—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤ –≤—Ä–µ–º–µ–Ω–∏:
   - –ù–∞—á–∞–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥: –≤–µ—Å—å —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å
   - –í—ã—á–µ—Å—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
   - –í—ã—á–µ—Å—Ç—å –ø–µ—Ä–µ—Ä—ã–≤—ã
3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞:
   - –ù–∞—Ä–µ–∑–∞—Ç—å —Å–ª–æ—Ç—ã –æ—Ç –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–∏–æ–¥–∞ —Å —à–∞–≥–æ–º = –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–ª–æ—Ç–∞
   - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è, –∫–æ–≥–¥–∞ —Å–ª–µ–¥—É—é—â–∏–π —Å–ª–æ—Ç –Ω–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ –ø–µ—Ä–∏–æ–¥
4. –í–µ—Ä–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤
```

**–ü—Ä–∏–º–µ—Ä:**
```
–†–∞–±–æ—á–∏–µ —á–∞—Å—ã: 09:00-18:00
–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –±—Ä–æ–Ω–∏: 10:00-11:30, 14:00-15:00
–ü–µ—Ä–µ—Ä—ã–≤: 13:00-14:00
–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–ª–æ—Ç–∞: 60 –º–∏–Ω—É—Ç

–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã:
09:00-10:00, 11:30-13:00, 15:00-18:00

–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ—Ç—ã:
09:00-10:00
11:30-12:30
12:30-13:00 ‚ùå (–Ω–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è 60 –º–∏–Ω—É—Ç)
15:00-16:00
16:00-17:00
17:00-18:00
```

---

## üîÑ Workflow –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. **–ü–æ–∏—Å–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤**
```php
// –ü–æ–ª—É—á–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ 10 —Å–ª–æ—Ç–æ–≤ –Ω–∞—á–∏–Ω–∞—è —Å —Å–µ–≥–æ–¥–Ω—è
$slots = $bookingService->getNextAvailableSlots(
    $resource, 
    Carbon::now(), 
    10, 
    true
);
```

### 2. **–°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è**
```php
// –î–ª—è –∫–ª–∏–µ–Ω—Ç–∞ (—Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
$booking = $bookingService->createBooking(
    $resource,
    '2024-01-15 14:00:00',
    '2024-01-15 15:00:00',
    $bookerData,
    false // is_admin = false
);

// –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (—Å—Ä–∞–∑—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω–æ–µ)
$booking = $bookingService->createBooking(
    $resource,
    '2024-01-15 14:00:00',
    '2024-01-15 15:00:00',
    $bookerData,
    true // is_admin = true
);
```

### 3. **–í–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±—Ä–æ–Ω–∏:**
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –¥–æ –±—Ä–æ–Ω–∏** (min_advance_time)
- **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–ª–æ—Ç–æ–≤** (–¥–ª—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏)
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π** —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏
- **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ä–µ—Å—É—Ä—Å–∞** –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è

### 4. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏:**
```php
// –°—Ç–∞—Ç—É—Å—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
enum BookingStatus: string
{
    case PENDING = 'pending';              // –û–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
    case CONFIRMED = 'confirmed';          // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞
    case CANCELLED_BY_CLIENT = 'cancelled_by_client';  // –û—Ç–º–µ–Ω–µ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–æ–º
    case CANCELLED_BY_ADMIN = 'cancelled_by_admin';    // –û—Ç–º–µ–Ω–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
    case REJECTED = 'rejected';            // –û—Ç–∫–ª–æ–Ω–µ–Ω–∞
}
```

---

## üé™ –û—Å–æ–±—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### 1. **–ì—Ä—É–ø–ø–æ–≤—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è**
```php
// –†–µ—Å—É—Ä—Å —Å max_participants > 1 —Å—á–∏—Ç–∞–µ—Ç—Å—è –≥—Ä—É–ø–ø–æ–≤—ã–º
$config = [
    "max_participants": 10,
    "slot_duration_minutes": 90
];

// –ù–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É –º–æ–≥—É—Ç –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –¥–æ 10 —á–µ–ª–æ–≤–µ–∫ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
```

### 2. **–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º**
```php
$config = [
    "require_confirmation": true,
    "slot_duration_minutes": 30
];

// –ë—Ä–æ–Ω—å —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º PENDING
// –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —á–µ—Ä–µ–∑ confirmBooking()
```

### 3. **–ú–Ω–æ–≥–æ—Å–ª–æ—Ç–æ–≤—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è**
```php
// –ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤
$isAvailable = $bookingService->isSlotAvailable(
    $resource, 
    '2024-01-15 14:00:00', 
    4 // 4 —Å–ª–æ—Ç–∞ –ø–æ 30 –º–∏–Ω—É—Ç = 2 —á–∞—Å–∞
);
```

### 4. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏**
- **–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏** –¥–æ –±—Ä–æ–Ω–∏
- **–°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–µ–π –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è** (–Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ —Å–ª–æ—Ç–∞–º)
- **–û—Ç–º–µ–Ω–∞ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è** (–∏–≥–Ω–æ—Ä–∏—Ä—É—è cancellation_time)
- **–ü–µ—Ä–µ–Ω–æ—Å –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è** (–∏–≥–Ω–æ—Ä–∏—Ä—É—è reschedule_time)

---

## üìä API Endpoints

### Core Entities (CRUD)
```
GET    /api/companies                    # –°–ø–∏—Å–æ–∫ –∫–æ–º–ø–∞–Ω–∏–π
POST   /api/companies                   # –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–∞–Ω–∏—é
GET    /api/companies/{id}              # –ü–æ–ª—É—á–∏—Ç—å –∫–æ–º–ø–∞–Ω–∏—é
PUT    /api/companies/{id}              # –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–ø–∞–Ω–∏—é
DELETE /api/companies/{id}              # –£–¥–∞–ª–∏—Ç—å –∫–æ–º–ø–∞–Ω–∏—é

GET    /api/timetables                  # –°–ø–∏—Å–æ–∫ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π
POST   /api/timetables                  # –°–æ–∑–¥–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
# ... –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è resource-types, resources
```

### Booking Functionality
```
GET    /api/booking/resources           # –†–µ—Å—É—Ä—Å—ã –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
GET    /api/booking/{resource}/slots    # –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ—Ç—ã —Ä–µ—Å—É—Ä—Å–∞
POST   /api/booking/create              # –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
POST   /api/booking/{id}/confirm        # –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –±—Ä–æ–Ω—å
POST   /api/booking/{id}/cancel         # –û—Ç–º–µ–Ω–∏—Ç—å –±—Ä–æ–Ω—å
POST   /api/booking/{id}/reschedule     # –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –±—Ä–æ–Ω—å
GET    /api/booking/resource/{id}/bookings # –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞
GET    /api/booking/check               # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
```

### Timetable Management
```
POST   /api/timetables/{id}/attach-resource      # –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ä–µ—Å—É—Ä—Å
POST   /api/timetables/{id}/detach-resource      # –û—Ç–∫—Ä–µ–ø–∏—Ç—å —Ä–µ—Å—É—Ä—Å
POST   /api/timetables/{id}/attach-resource-type # –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ç–∏–ø —Ä–µ—Å—É—Ä—Å–∞
POST   /api/timetables/{id}/detach-resource-type # –û—Ç–∫—Ä–µ–ø–∏—Ç—å —Ç–∏–ø —Ä–µ—Å—É—Ä—Å–∞
```

---

## üîß Artisan Commands

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```bash
php artisan booking:generate-test-data --company-id=1
```
–°–æ–∑–¥–∞–µ—Ç:
- –ö–æ–º–ø–∞–Ω–∏—é —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
- –¢–∏–ø—ã —Ä–µ—Å—É—Ä—Å–æ–≤ (—Å–æ—Ç—Ä—É–¥–Ω–∏–∫, –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–Ω–∞—è, —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞)
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏
- –¢–µ—Å—Ç–æ–≤—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π
```bash
# –°—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
php artisan timetable:generate-static {company_id}

# –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
php artisan timetable:generate-dinamic {company_id} {days=30}
```

---

## üóÉÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
```sql
companies           # –ö–æ–º–ø–∞–Ω–∏–∏
timetables          # –†–∞—Å–ø–∏—Å–∞–Ω–∏—è (—Å–≤—è–∑–∞–Ω—ã —Å companies)
resource_types      # –¢–∏–ø—ã —Ä–µ—Å—É—Ä—Å–æ–≤ (—Å–≤—è–∑–∞–Ω—ã —Å companies, timetables)
resources           # –†–µ—Å—É—Ä—Å—ã (—Å–≤—è–∑–∞–Ω—ã —Å companies, resource_types, timetables)
bookings            # –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (—Å–≤—è–∑–∞–Ω—ã —Å companies, resources, timetables)
bookers             # –ë—Ä–æ–Ω–∏—Ä—É—é—â–∏–µ (polymorphic –æ—Ç–Ω–æ—à–µ–Ω–∏—è)
bookables           # –°–≤—è–∑—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è polymorphic –æ—Ç–Ω–æ—à–µ–Ω–∏–π
```

### –ö–ª—é—á–µ–≤—ã–µ –∏–Ω–¥–µ–∫—Å—ã:
- `resources(company_id, timetable_id)`
- `bookings(resource_id, start, end)`
- `bookings(company_id, start)`
- `bookers(external_id, type)`

---

## üé® –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. **–°–∞–ª–æ–Ω –∫—Ä–∞—Å–æ—Ç—ã**
```php
// –¢–∏–ø —Ä–µ—Å—É—Ä—Å–∞: –°–æ—Ç—Ä—É–¥–Ω–∏–∫
$employeeType = [
    "type": "employee",
    "resource_config": {
        "slot_duration_minutes": 45,
        "slot_strategy": "fixed",
        "require_confirmation": false,
        "min_advance_time": 60
    }
];

// –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–∞—Ä–∏–∫–º–∞—Ö–µ—Ä
$hairdresser = [
    "resource_config": {
        "slot_duration_minutes": 60  // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
    }
];
```

### 2. **–ö–æ–≤–æ—Ä–∫–∏–Ω–≥**
```php
// –¢–∏–ø —Ä–µ—Å—É—Ä—Å–∞: –ü–µ—Ä–µ–≥–æ–≤–æ—Ä–Ω–∞—è
$meetingRoomType = [
    "type": "meeting_room", 
    "resource_config": {
        "slot_duration_minutes": 30,
        "slot_strategy": "dynamic",
        "max_participants": 8,
        "min_advance_time": 30
    }
];
```

### 3. **–§–∏—Ç–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä**
```php
// –¢–∏–ø —Ä–µ—Å—É—Ä—Å–∞: –ì—Ä—É–ø–ø–æ–≤–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞
$trainingType = [
    "type": "training",
    "resource_config": {
        "slot_duration_minutes": 90,
        "slot_strategy": "fixed", 
        "max_participants": 20,
        "require_confirmation": false,
        "min_advance_time": 1440  // –ó–∞ 24 —á–∞—Å–∞
    }
];
```

---

## üîç –ê–ª–≥–æ—Ä–∏—Ç–º—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

### 1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–ª–æ—Ç–∞**
```php
public function isSlotAvailable(Resource $resource, string $start, int $slots = 1): bool
{
    $duration = $config->slot_duration_minutes * $slots;
    $end = $start->copy()->addMinutes($duration);
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏
    $overlapExists = Booking::where('resource_id', $resource->id)
        ->where('start', '<', $end)
        ->where('end', '>', $start)
        ->whereIn('status', ['pending', 'confirmed'])
        ->exists();
        
    return !$overlapExists;
}
```

### 2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –≤—Ä–µ–º–µ–Ω–∏**
```php
private function validateBookingTime(Resource $resource, Carbon $start, Carbon $end, ResourceConfig $config): void
{
    // –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –¥–æ –±—Ä–æ–Ω–∏
    if ($start->diffInMinutes(now()) < $config->min_advance_time) {
        throw new Exception('–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –∑–∞ X –º–∏–Ω—É—Ç');
    }
    
    // –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å–ª–æ—Ç–∞–º (–¥–ª—è –Ω–µ-–∞–¥–º–∏–Ω–æ–≤)
    if (!$isAdmin && $config->isFixedStrategy()) {
        if (!$this->isValidSlotTime($resource, $start, $end, $config)) {
            throw new Exception('–í—Ä–µ–º—è –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–º —Å–ª–æ—Ç–∞–º');
        }
    }
}
```

---

## üìà –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã

### 1. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —Ä–µ—Å—É—Ä—Å–æ–≤**
- –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø –≤ `resource_types`
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `resource_config`
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è

### 2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏**
- –ß–µ—Ä–µ–∑ –º–æ–¥–µ–ª—å `Booker` —Å polymorphic –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `external_id` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

### 3. **–ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–ª–æ—Ç–æ–≤**
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `SlotGenerationService`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Ä–µ—Å—É—Ä—Å–∞

---

## üöÄ –ó–∞–ø—É—Å–∫ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### 1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞**
```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
git clone <repository>
cd project

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
composer install

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env
cp .env.example .env

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
php artisan migrate

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
php artisan booking:generate-test-data
```

### 2. **Docker –æ–∫—Ä—É–∂–µ–Ω–∏–µ**
```bash
# –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ —Å—Ç–µ–∫–∞
docker-compose -f Docker/docker-compose.yml up -d

# –ë–î –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ localhost:8006
# phpMyAdmin –Ω–∞ localhost:8093
```

### 3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API**
```bash
# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
php artisan serve

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Postman
# –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é: storage/app/exports/booking_system_postman_collection.json
```

---

## üí° –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
- –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ—Ç —Ç–∏–ø–∞ —Ä–µ—Å—É—Ä—Å–∞ –∫ —Ä–µ—Å—É—Ä—Å—É
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ä–µ—Å—É—Ä—Å–∞
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π

### ‚úÖ **–ú–æ—â–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–ª–æ—Ç–æ–≤**
- –î–≤–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è)
- –£—á–µ—Ç –ø–µ—Ä–µ—Ä—ã–≤–æ–≤ –∏ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–æ—Å–ª–æ—Ç–æ–≤—ã—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π

### ‚úÖ **–†–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø—Ä–∞–≤**
- –†–∞–∑–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- –ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π

### ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≥—Ä—É–ø–ø–æ–≤—ã—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- Polymorphic –æ—Ç–Ω–æ—à–µ–Ω–∏—è –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

---

## üîÑ Sequence Diagrams

### –ü—Ä–æ—Ü–µ—Å—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–∫–ª–∏–µ–Ω—Ç):
```
–ö–ª–∏–µ–Ω—Ç ‚Üí API: GET /api/booking/{resource}/slots
API ‚Üí SlotGenerationService: generateSlotsForDate()
SlotGenerationService ‚Üí Database: –ü–æ–ª—É—á–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∏ –±—Ä–æ–Ω–∏
SlotGenerationService: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ—Ç—ã
API ‚Üí –ö–ª–∏–µ–Ω—Ç: –í–µ—Ä–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫ —Å–ª–æ—Ç–æ–≤

–ö–ª–∏–µ–Ω—Ç ‚Üí API: POST /api/booking/create
API ‚Üí BookingService: createBooking()
BookingService: –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
BookingService ‚Üí Database: –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –±—Ä–æ–Ω–∏
BookingService ‚Üí Event: –û—Ç–ø—Ä–∞–≤–∏—Ç—å BookingCreated
API ‚Üí –ö–ª–∏–µ–Ω—Ç: –í–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
```

### –ü—Ä–æ—Ü–µ—Å—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –±—Ä–æ–Ω–∏:
```
–ê–¥–º–∏–Ω ‚Üí API: POST /api/booking/{id}/confirm
API ‚Üí BookingService: confirmBooking()
BookingService ‚Üí Database: –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–∞ "confirmed"
BookingService ‚Üí Event: –û—Ç–ø—Ä–∞–≤–∏—Ç—å BookingConfirmed
API ‚Üí –ê–¥–º–∏–Ω: –í–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
```

---

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö:

**Company:**
```php
class Company extends Model
{
    protected $fillable = ['id', 'name', 'description'];
    
    public function timetables() { return $this->hasMany(Timetable::class); }
    public function resourceTypes() { return $this->hasMany(ResourceType::class); }
    public function resources() { return $this->hasMany(Resource::class); }
    public function bookings() { return $this->hasMany(Booking::class); }
}
```

**Resource (—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π):**
```php
class Resource extends Model
{
    use HasResourceConfig;
    
    protected $casts = [
        'options' => 'array',
        'payload' => 'array', 
        'resource_config' => 'array',
    ];
    
    public function getEffectiveTimetable()
    {
        return $this->timetable ?? $this->resourceType->timetable;
    }
}
```

### –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π:

**BookingService:**
```php
class BookingService
{
    public function __construct(private SlotGenerationService $slotService) {}
    
    public function createBooking(Resource $resource, string $start, string $end, array $bookerData = [], bool $isAdmin = false): Booking
    {
        return DB::transaction(function () use ($resource, $start, $end, $bookerData, $isAdmin) {
            // –í–∞–ª–∏–¥–∞—Ü–∏–∏
            $this->validateBookingTime($resource, $start, $end, $config, $isAdmin);
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
            if (!$this->isRangeAvailable($resource, $start, $end)) {
                throw new Exception('–í—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω –∑–∞–Ω—è—Ç');
            }
            
            // –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏
            $booking = Booking::create([...]);
            
            // –ü—Ä–∏–≤—è–∑–∫–∞ –±—Ä–æ–Ω–∏—Ä—É—é—â–µ–≥–æ
            if (!empty($bookerData)) {
                $this->attachBooker($booking, $bookerData);
            }
            
            return $booking;
        });
    }
}
```

---

## üìö –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ö–∞–Ω–∞–ª—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
- **booking** - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- **slots** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–æ—Ç–æ–≤
- **events** - —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API
- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- –ß–∞—Å—Ç–æ—Ç–∞ –æ—Ç–º–µ–Ω –∏ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í–∞–ª–∏–¥–∞—Ü–∏–∏:
- SQL injection protection —á–µ—Ä–µ–∑ Eloquent
- XSS protection —á–µ—Ä–µ–∑ Blade templates
- CSRF protection –¥–ª—è web-—Ñ–æ—Ä–º
- Rate limiting –¥–ª—è API endpoints

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –∫–ª–∏–µ–Ω—Ç/–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞–º–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

---

–≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –∏ workflow —Å–∏—Å—Ç–µ–º—ã, –ø–æ–∑–≤–æ–ª—è—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –∏–ª–∏ —Ä–∞—Å—à–∏—Ä—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.
